##  VTK 格式规格文档

为了写出 HyperView 能正确识别的 `.vtu` 文件，求解器需要按以下规格整理内存中的数据。

### A. 几何与拓扑数据 (Geometry & Topology)

这是定义网格的基础，必须包含以下三个数组：

| **数组名称**     | **VTK 节点/属性** | **数据类型** | **说明**                                                     |
| ---------------- | ----------------- | ------------ | ------------------------------------------------------------ |
| **Points**       | `<Points>`        | `float64`    | 连续的坐标值：$[x_1, y_1, z_1, x_2, y_2, z_2, ...]$          |
| **Connectivity** | `connectivity`    | `int32`      | 单元关联的节点索引（从0开始）。例如一个四面体：$[0, 1, 2, 3]$ |
| **Offsets**      | `offsets`         | `int32`      | 每个单元在 Connectivity 数组中的结束位置索引                 |
| **Cell Types**   | `types`           | `uint8`      | 单元的 VTK 类型 ID（见下方说明）                             |

> **注意：** 如果是八节点六面体，VTK 类型 ID 是 **12**；如果是四节点四面体，ID 是 **10**。

------

### B. 结果数据 (Field Data)

结果分为“节点数据”和“单元数据”。

#### 1. 节点数据 (PointData)

这类数据在 HyperView 中可以直接进行平滑云图显示。

- **Displacement (位移)**: 3分量矢量 $[u_x, u_y, u_z]$。
- **Reaction Force (反力)**: 3分量矢量。

#### 2. 单元数据 (CellData)

这类数据定义在单元中心或积分点。

- **Stress (应力)**: 通常输出 6 个分量 $[S_{11}, S_{22}, S_{33}, S_{12}, S_{23}, S_{13}]$。
- **Strain (应变)**: 同上。
- **Mises/Equivalent**: 单分量标量。